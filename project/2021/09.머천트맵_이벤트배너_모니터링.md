## 가맹점주 이벤트 배너 등록 기능 출시 및 모니터링

### 기획

- 머천트맵에서 운영자가 가맹점주의 의뢰를 받아서 등록하던 이벤트 배너를 가맹점주가 직접 등록할 수 있도록 기능을 출시한다.
- 해당 기능이 출시되고 부적적한 배너를 사후 모니터링할 수 있는 기능을 제공하고, 부적절한 배너를 등록한 점주에게는 패널티를 부여한다.

### 일정

- 기간 : 21.09.27 ~ 21.10.22
- BETA QA : 21.11.04
- RC QA : 21.11.11
- 투입 인력 : 2인
- Release : 2021.11.24 배포

### 회고

#### 함께 개발하는 동료 충원

이 당시에 팀원 한 분이 또 퇴사를 하시게 되고, 다른 팀에서 두 분이 우리 팀으로 합류하게 되었다. 그 중 한분과 이 프로젝트를 같이 진행하게 됐다. 머천트맵 컴포넌트가 아키텍쳐는 간단하지만, 사내에서 잘 사용되지 않는 기술들로 구성되어있어 러닝커브가 제법 높다. 따라서 팀원 분께는 비교적 컴포넌트에 대한 이해가 필요없는 부분에 대한 테스크를 할당해드렸고 함께 개발을 진행하게 됐다. 6개월 이상 해당 컴포넌트를 혼자 개발해오다보니 제대로 된 코드리뷰를 받지 못하고 혼자서 책임져야 하는 상황이 많았는데, 오랜만에 팀을 이뤄 개발하니 기분이 이상했다. **같이 작업하시는 팀원분이 코드 스타일과 관련된 코드 리뷰를 진행해주셨는데 나와 생각이 일치하는 부분이 많아서 전반적인 코드 스타일까지 정할 수 있었고, 리팩토링이 필요한 부분에 대해서도 서로 조언해주며 고쳐나갔다.** 평소에도 컴포넌트에 대한 애착이 있었지만 방청소를 하고 기분이 좋아지는 것처럼, 컴포넌트에 쌓여있는 기술 부채와 같은 것들을 조금씩 정리해나가는 작업이 머리와 마음 모두 환기시키는 기분이었다. 앞으로도 팀원 분과 함께 개발하면서 서로 발전할 수 있으면 좋겠다.

<br>

#### 외주 개발은 어려워

이 프로젝트는 NTS, NEMU와 공동 작업이 필요한 과제이다. NTS와는 기존에도 함께 작업해온 경험이 꽤 많아, 개발 스타일에 대해서는 어느정도 인지하고 있다. 이번 과제에서는 NTS에서 API를 하나만 제공해주면 되기 때문에 API를 요청드리고 우리 컴포넌트에서는 internal-corps gw를 통해서 NTS API를 호출해오기만 하면 됐다. 처음 설정해보는 igw 작업이라 작은 삽질 정도는 있었지만 큰 무리는 없었다. 문제는 NEMU 쪽과 작업을 해보는 것은 이전에 쿠폰 관련 외주를 맡겼을 때 외에는 처음이었기에 업무만 가이드 드리면 알아서 잘 진행하고 계실 줄 알았다.

하지만 생각과 달리 개발 속도가 안나오기도 하고, API Spec에 맞지 않는 API 호출을 하는 등의 실수가 많아 대응에 필요한 시간이 꽤 많이 들었다. 설상가상으로 OBS를 연동해야 한다고 수차례 가이드를 드렸지만 OBS에 대한 작업 자체가 누락되었고, 전체 개발 일정에까지 차질이 생길 뻔 했다. 이후에 내가 드린 OBS 연동 가이드에는 대역폭 이슈가 발생할 수 있기에 callback 인증 기법으로 새롭게 가이드를 제공해드렸고, obs 생성과 설정 등에 꽤 많은 시간을 쏟게 됐다. QA 기간이 되었음에도 불구하고 OBS 호출이 되지 않는다고 며칠이 지연되고 있었고, OBS팀에 문의를 드려도 제대로 된 답을 얻기가 힘들었다. 로컬에서 내가 테스트했을 땐 정상적으로 업로드가 되기에, 시니어 분께 도움을 요청드리고 함께 zoom을 통해 코드를 확인했다. 확인해보니 OBS callback 인증 URL을 이상한데로 요청하고 있었고, OBS API spec을 따르지 않는 부분들이 존재했다. 결국 관련된 코드를 전부 알려드리고, 어떻게 호출하라고 상세하게 가이드를 제공해 수정할 수 있었다. OBS연동은 QA에 3일정도 지연을 말씀드렸지만 사실상 7일 가까이 지연됐고 나 또한 다른 작업을 하지 못하고 OBS 이슈를 계속 파악하느라 많은 시간을 쏟았다. 다행이도 이미지 업로드를 제외한 부분 먼저 테스트가 가능했기에 우리 쪽 배포일정에는 차질이 없었다. 

**개발 기간이 넉넉치 않아 신경을 쓰지 않으려고 외주 개발을 맡기는 것인데 외주 개발에 시간을 많이 쏟게 되는 게 아이러니 했다. 또, 외주와 함께 일하게 될 경우 어떻게 케어해야 하는지 어느정도 가이드가 있으면 좋을 것 같단 생각이 들었다.** 시니어분께 조언을 구해서 내린 결론은, 외주 개발에서 **중요하거나 복잡한 로직의 경우 주기적으로 체크**를 진행해야 한다는 것과 개발이 너무 지연이 되는 것 같으면 그 원인을 물어보고 적극적으로 해결에 임해야 한다는 것이다. 이번 교훈을 명심해서 다음에 작업할 때는 보다 좋은 관리자(?) 역할을 수행할 수 있도록 노력해야겠다. 그리고 수많은 외주 프로젝트를 케어하고 계신 시니어분께 존경을 표한다.

<br>

#### 꼼꼼한 개발

이번 프로젝트는 비즈니스 로직 상의 `버그`가 QA 기간을 통틀어서 `3건` 정도로 거의 없었다. Admin UI 관련 이슈가 6건 정도 더 등록이 되었으나 이 수치도 이전과 비교했을 때 현저히 적다. 이번에 **버그가 적은 가장 큰 이유 중 하나는 기획 시연과 Sanity test가 있었기 때문이 아닐까 싶다.** 이번 프로젝트는 평소보다 일주일 먼저 개발을 끝냈고, Sanity test를 통해 기능상의 오류가 존재하는 것들은 사전에 수정을 진행했다. 그 뒤에는 기획팀을 초대하여 기능에 대해서 시연을 진행했다. 시연에서 기획팀의 요구사항과 일치하지 않는 부분이나 일부 수정이 필요한 UI를 사전에 확인할 수 있었고, BETA QA가 시작하기 전에 기획에서 리포팅해준 부분들을 먼저 수정할 수 있었다. 보통 BETA QA 기간에 다른 개발이 동시에 이뤄지다보니 시간에 쫓기기 마련인데, 등록되는 버그가 적다보니 시간에 쫓기지는 않았다. 덕분에 외주 관리에 많은 시간을 쏟을 수 있었다. 물론 그 과정도 위에서 말한 것처럼 배운 것 역시 있었다. 앞으로도 이런 과정이 가능할 지 모르지만, **개발 기간 자체를 넉넉하게 잡고 Sanity test와 기획에 시연 및 기획에 검토를 요청하는 방식이 하나의 프로세스로 자리잡으면 어떨까?** 라는 생각이 든다. 만약 이런 프로세스가 정립되지 않더라도 머천트맵 과제에 한해서는 이런 프로세스로 진행할 수 있도록 기획팀에도 요청해봐야겠다.