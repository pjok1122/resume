## 머천트맵 핫플레이스 & 추천 배지

### 기획

우리동네 Hotplace라는 신규 영역 추가. 해당 영역은 Admin을 통해 등록할 수 있으며, 추후에는 마케팅상품을 구매한 가맹점들의 점포가 노출될 수 있다.

점포 목록에 추천 배지를 함께 노출할 수 있는 기능을 제공한다. 추천 배지는 Admin을 통해 등록할 수 있다.

### 일정

- 기간 : 22.01.17 ~ 22.02.23
- Sanity QA: 22.02.23 ~ 22.02.25
- 투입 인력 : 2인
- Release : 2021.03.30 배포

### 개발

- 추천 배지 기능에 대한 설계 리뷰 및 DB schema 생성
- 추천 배지 등록/수정/삭제 Admin 기능 개발
- 추천 배지를 점포에 매핑하는 Admin 기능 개발

### 회고

Vuex를 도입하여 Vue 컴포넌트 간의 복잡한 통신을 줄이고, 재사용 가능한 Component들을 정의했습니다. 주소 셀렉터, 배지 셀렉터와 같은 컴포넌트들을 만듦으로써 코드의 유지보수성과 생산성을 높일 수 있었습니다.

불필요한 Admin 기획이나 설계에 대해서 유저의 입장에서 생각하였습니다. 사용자 입장에서 오해의 소지가 있는 operation은 다른 여러 대안을 제시하여 기획팀 전체와 회의를 진행했고, 기획을 더 나은 방향으로 재생산할 수 있었습니다.

Hotplace 기능에 대한 리뷰와 공수 산정을 진행하여 팀 내에 공유했습니다.

팀원이 Front API를 처음 작업하기 때문에 Geo Query와 관련된 기술적인 검토나 여러 방면으로 조언을 해주었고, 코드리뷰에서도 효율적인 쿼리를 작성할 수 있도록 도와주었습니다.

현재 real 환경에서 생성된 인덱스 중 사용되지 않는 인덱스를 확인해 7개의 인덱스를 삭제하였습니다. 사용 중인 인덱스도 그 효용이 있는지에 대한 검토를 진행했고, 다음 달에 한 번 더 최적화를 진행할 예정입니다.

새로 만들어진 front API에 맞춰서 인덱스를 생성했습니다. partialFilterExpression을 이용해 꼭 필요한 상황에만 인덱스를 저장하도록 최적화 했고, 인덱스 선행 컬럼을 최대한 많은 데이터가 필터링 되도록 설계하였습니다. 이렇게 생성된 인덱스로 BETA, RC에서 테스트를 진행했으며 쿼리 응답 속도는 1ms ~ 2ms 로 응답이 나오는 것 또한 확인했습니다.